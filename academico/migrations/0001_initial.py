# Generated by Django 5.2.8 on 2025-12-01 13:17

import django.core.validators
import django.db.models.deletion
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AnoLectivo',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('designacao', models.CharField(max_length=50)),
                ('data_inicio', models.DateField()),
                ('data_fim', models.DateField()),
                ('activo', models.BooleanField(default=False)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'verbose_name': 'Ano Lectivo',
                'verbose_name_plural': 'Anos Lectivos',
                'db_table': 'ano_lectivo',
            },
        ),
        migrations.CreateModel(
            name='Categoria',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('categoria', models.CharField(max_length=100)),
            ],
        ),
        migrations.CreateModel(
            name='Classe',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('numero', models.IntegerField(validators=[django.core.validators.MinValueValidator(10), django.core.validators.MaxValueValidator(12)])),
                ('designacao', models.CharField(max_length=50)),
                ('ciclo', models.CharField(default='II Ciclo', max_length=20)),
                ('ordem', models.IntegerField()),
            ],
            options={
                'verbose_name': 'Classe',
                'verbose_name_plural': 'Classes',
                'db_table': 'classe',
                'ordering': ['ordem'],
            },
        ),
        migrations.CreateModel(
            name='Curso',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=20)),
                ('nome', models.CharField(max_length=200)),
                ('nome_abreviado', models.CharField(max_length=50)),
                ('descricao', models.TextField(blank=True)),
                ('duracao_anos', models.IntegerField(default=3)),
                ('activo', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Curso',
                'verbose_name_plural': 'Cursos',
                'db_table': 'curso',
            },
        ),
        migrations.CreateModel(
            name='Disciplina',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('codigo', models.CharField(max_length=20)),
                ('nome', models.CharField(max_length=200)),
                ('nome_abreviado', models.CharField(max_length=10)),
                ('descricao', models.TextField(blank=True)),
                ('carga_horaria_semanal', models.IntegerField()),
                ('activo', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Disciplina',
                'verbose_name_plural': 'Disciplinas',
                'db_table': 'disciplina',
            },
        ),
        migrations.CreateModel(
            name='PlanoSubscricao',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nome', models.CharField(max_length=100)),
                ('descricao', models.TextField()),
                ('preco_mensal', models.DecimalField(decimal_places=2, max_digits=10)),
                ('preco_anual', models.DecimalField(decimal_places=2, max_digits=10)),
                ('max_alunos', models.IntegerField()),
                ('max_professores', models.IntegerField()),
                ('max_turmas', models.IntegerField()),
                ('funcionalidades', models.JSONField(default=dict)),
                ('activo', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name': 'Plano de Subscrição',
                'verbose_name_plural': 'Planos de Subscrição',
                'db_table': 'plano_subscricao',
            },
        ),
        migrations.CreateModel(
            name='Aluno',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('numero_processo', models.CharField(max_length=50, unique=True)),
                ('nome_completo', models.CharField(max_length=200)),
                ('nome_pai', models.CharField(max_length=200)),
                ('nome_mae', models.CharField(max_length=200)),
                ('data_nascimento', models.DateField()),
                ('naturalidade', models.CharField(max_length=100)),
                ('nacionalidade', models.CharField(default='Angolana', max_length=50)),
                ('bi', models.CharField(blank=True, max_length=20)),
                ('data_emissao_bi', models.DateField(blank=True, null=True)),
                ('genero', models.CharField(choices=[('M', 'Masculino'), ('F', 'Feminino')], max_length=1)),
                ('tipo_sanguineo', models.CharField(blank=True, max_length=5)),
                ('necessidades_especiais', models.TextField(blank=True)),
                ('foto', models.ImageField(blank=True, null=True, upload_to='alunos/fotos/')),
                ('endereco_completo', models.TextField()),
                ('provincia', models.CharField(max_length=50)),
                ('municipio', models.CharField(max_length=50)),
                ('bairro', models.CharField(max_length=100)),
                ('telefone', models.CharField(blank=True, max_length=20)),
                ('email', models.EmailField(blank=True, max_length=100)),
                ('status', models.CharField(choices=[('Matriculado', 'Matriculado'), ('Transferido', 'Transferido'), ('Desistente', 'Desistente'), ('Concluído', 'Concluído'), ('Suspenso', 'Suspenso')], default='Matriculado', max_length=20)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('criado_por', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='alunos_criados', to=settings.AUTH_USER_MODEL)),
                ('utilizador', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Aluno',
                'verbose_name_plural': 'Alunos',
                'db_table': 'aluno',
            },
        ),
        migrations.CreateModel(
            name='ContaAluno',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('saldo_devedor', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_pago', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('total_devido', models.DecimalField(decimal_places=2, default=0, max_digits=12)),
                ('status', models.CharField(choices=[('Em Dia', 'Em Dia'), ('Pendente', 'Pendente'), ('Atrasado', 'Atrasado'), ('Bloqueado', 'Bloqueado')], default='Em Dia', max_length=20)),
                ('ultima_actualizacao', models.DateTimeField(auto_now=True)),
                ('aluno', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.aluno')),
                ('ano_lectivo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.anolectivo')),
            ],
        ),
        migrations.CreateModel(
            name='DocumentoAluno',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('tipo_documento', models.CharField(choices=[('BI', 'Bilhete de Identidade'), ('Certificado', 'Certificado'), ('Atestado', 'Atestado Médico'), ('Foto', 'Fotografia'), ('Boletim', 'Boletim de Notas'), ('Outros', 'Outros')], max_length=20)),
                ('titulo', models.CharField(max_length=200)),
                ('arquivo', models.FileField(upload_to='alunos/documentos/')),
                ('data_upload', models.DateTimeField(auto_now_add=True)),
                ('aluno', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documentos', to='academico.aluno')),
                ('uploaded_por', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Documento do Aluno',
                'verbose_name_plural': 'Documentos dos Alunos',
                'db_table': 'documento_aluno',
            },
        ),
        migrations.CreateModel(
            name='MaterialDidatico',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('titulo', models.CharField(max_length=200)),
                ('descricao', models.TextField(blank=True)),
                ('tipo', models.CharField(choices=[('Apostila', 'Apostila'), ('Exercício', 'Exercício'), ('Slide', 'Slide'), ('Vídeo', 'Vídeo'), ('Áudio', 'Áudio'), ('Link', 'Link'), ('Outro', 'Outro')], max_length=50)),
                ('arquivo', models.FileField(blank=True, null=True, upload_to='materiais/arquivos/')),
                ('url_externa', models.CharField(blank=True, max_length=500)),
                ('tamanho_arquivo', models.IntegerField(blank=True, null=True)),
                ('visualizacoes', models.IntegerField(default=0)),
                ('downloads', models.IntegerField(default=0)),
                ('data_publicacao', models.DateTimeField(auto_now_add=True)),
                ('activo', models.BooleanField(default=True)),
                ('classe', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.classe')),
                ('curso', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='academico.curso')),
                ('disciplina', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.disciplina')),
            ],
        ),
        migrations.CreateModel(
            name='AcessoMaterial',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('tipo_acesso', models.CharField(choices=[('Visualização', 'Visualização'), ('Download', 'Download')], max_length=20)),
                ('data_acesso', models.DateTimeField(auto_now_add=True)),
                ('ip_address', models.CharField(blank=True, max_length=45)),
                ('utilizador', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('material', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.materialdidatico')),
            ],
        ),
        migrations.CreateModel(
            name='PeriodoAvaliativo',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('numero_periodo', models.IntegerField(validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(3)])),
                ('designacao', models.CharField(max_length=50)),
                ('data_inicio', models.DateField()),
                ('data_fim', models.DateField()),
                ('activo', models.BooleanField(default=False)),
                ('ano_lectivo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='periodos', to='academico.anolectivo')),
            ],
            options={
                'verbose_name': 'Período Avaliativo',
                'verbose_name_plural': 'Períodos Avaliativos',
                'db_table': 'periodo_avaliativo',
                'unique_together': {('ano_lectivo', 'numero_periodo')},
            },
        ),
        migrations.CreateModel(
            name='Avaliacao',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('designacao', models.CharField(max_length=200)),
                ('data_realizacao', models.DateField()),
                ('nota_maxima', models.DecimalField(decimal_places=2, default=20, max_digits=5)),
                ('observacoes', models.TextField(blank=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('criado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('disciplina', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.disciplina')),
                ('periodo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.periodoavaliativo')),
            ],
        ),
        migrations.CreateModel(
            name='Professor',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('numero_agente', models.CharField(max_length=50, unique=True)),
                ('nome_completo', models.CharField(max_length=200)),
                ('bi', models.CharField(max_length=20)),
                ('data_nascimento', models.DateField()),
                ('genero', models.CharField(choices=[('M', 'Masculino'), ('F', 'Feminino')], max_length=1)),
                ('nacionalidade', models.CharField(default='Angolana', max_length=50)),
                ('especialidade', models.CharField(max_length=100)),
                ('nivel_academico', models.CharField(choices=[('Bacharel', 'Bacharel'), ('Licenciado', 'Licenciado'), ('Mestre', 'Mestre'), ('Doutor', 'Doutor')], max_length=20)),
                ('instituicao_formacao', models.CharField(max_length=200)),
                ('anos_experiencia', models.IntegerField(default=0)),
                ('telefone', models.CharField(max_length=20)),
                ('email', models.EmailField(max_length=100)),
                ('endereco', models.TextField()),
                ('tipo_contrato', models.CharField(choices=[('Efectivo', 'Efectivo'), ('Contratado', 'Contratado'), ('Estagiário', 'Estagiário')], max_length=20)),
                ('data_admissao', models.DateField()),
                ('data_saida', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('Activo', 'Activo'), ('Inactivo', 'Inactivo'), ('Licença', 'Licença'), ('Demitido', 'Demitido')], default='Activo', max_length=20)),
                ('carga_horaria_semanal', models.IntegerField(default=0)),
                ('salario_base', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('foto', models.ImageField(blank=True, null=True, upload_to='professores/fotos/')),
                ('cv', models.FileField(blank=True, null=True, upload_to='professores/cvs/')),
                ('categoria', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.categoria')),
                ('utilizador', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Professor',
                'verbose_name_plural': 'Professores',
                'db_table': 'professor',
            },
        ),
        migrations.CreateModel(
            name='Nota',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nota', models.DecimalField(decimal_places=2, max_digits=6)),
                ('observacao', models.TextField(blank=True)),
                ('data_lancamento', models.DateTimeField(auto_now_add=True)),
                ('data_actualizacao', models.DateTimeField(auto_now=True)),
                ('aluno', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.aluno')),
                ('avaliacao', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.avaliacao')),
                ('lancado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='academico.professor')),
            ],
        ),
        migrations.AddField(
            model_name='materialdidatico',
            name='publicado_por',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='academico.professor'),
        ),
        migrations.CreateModel(
            name='FormacaoProfessor',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('titulo', models.CharField(max_length=200)),
                ('instituicao', models.CharField(max_length=200)),
                ('area', models.CharField(max_length=100)),
                ('nivel', models.CharField(max_length=50)),
                ('ano_conclusao', models.IntegerField()),
                ('certificado', models.FileField(blank=True, null=True, upload_to='professores/certificados/')),
                ('professor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='formacoes', to='academico.professor')),
            ],
            options={
                'verbose_name': 'Formação do Professor',
                'verbose_name_plural': 'Formações dos Professores',
                'db_table': 'formacao_professor',
            },
        ),
        migrations.AddField(
            model_name='avaliacao',
            name='professor',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='academico.professor'),
        ),
        migrations.CreateModel(
            name='TenantEscola',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nome', models.CharField(max_length=200)),
                ('nome_abreviado', models.CharField(max_length=50)),
                ('nif', models.CharField(max_length=20, unique=True)),
                ('email', models.EmailField(max_length=100)),
                ('telefone', models.CharField(max_length=20)),
                ('telefone_alternativo', models.CharField(blank=True, max_length=20, null=True)),
                ('site', models.URLField(blank=True, null=True)),
                ('logotipo', models.ImageField(blank=True, null=True, upload_to='escolas/logos/')),
                ('endereco_completo', models.TextField()),
                ('provincia', models.CharField(max_length=50)),
                ('municipio', models.CharField(max_length=50)),
                ('bairro', models.CharField(max_length=100)),
                ('tipo_ensino', models.CharField(choices=[('Privado', 'Privado'), ('Público', 'Público')], max_length=10)),
                ('data_fundacao', models.DateField(blank=True, null=True)),
                ('numero_alvara', models.CharField(blank=True, max_length=50, null=True)),
                ('data_criacao', models.DateTimeField(auto_now_add=True)),
                ('data_actualizacao', models.DateTimeField(auto_now=True)),
                ('activo', models.BooleanField(default=True)),
                ('data_expiracao_plano', models.DateField()),
                ('plano_subscricao', models.ForeignKey(on_delete=django.db.models.deletion.PROTECT, to='academico.planosubscricao')),
            ],
            options={
                'verbose_name': 'Escola',
                'verbose_name_plural': 'Escolas',
                'db_table': 'tenant_escola',
            },
        ),
        migrations.CreateModel(
            name='TenantConfiguracao',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nota_minima_aprovacao', models.DecimalField(decimal_places=2, default=10, max_digits=4)),
                ('percentual_faltas_reprovacao', models.DecimalField(decimal_places=2, default=25, max_digits=5)),
                ('permite_recuperacao', models.BooleanField(default=True)),
                ('formato_numero_processo', models.CharField(default='ES-{ano}-{sequencia}', max_length=50)),
                ('prefixo_factura', models.CharField(default='FT', max_length=10)),
                ('moeda', models.CharField(default='AOA', max_length=3)),
                ('dia_vencimento_propina', models.IntegerField(default=10, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(28)])),
                ('email_smtp_host', models.CharField(blank=True, max_length=200)),
                ('email_smtp_port', models.IntegerField(default=587)),
                ('email_remetente', models.EmailField(blank=True, max_length=100)),
                ('sms_provider', models.CharField(blank=True, max_length=50)),
                ('sms_api_key', models.CharField(blank=True, max_length=200)),
                ('multicaixa_entity', models.CharField(blank=True, max_length=20)),
                ('multicaixa_api_key', models.CharField(blank=True, max_length=200)),
                ('ano_lectivo_activo', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='academico.anolectivo')),
                ('periodo_activo', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to='academico.periodoavaliativo')),
                ('escola', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='configuracao', to='academico.tenantescola')),
            ],
            options={
                'verbose_name': 'Configuração da Escola',
                'db_table': 'tenant_configuracao',
            },
        ),
        migrations.AddField(
            model_name='professor',
            name='escola',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola'),
        ),
        migrations.AddField(
            model_name='materialdidatico',
            name='escola',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola'),
        ),
        migrations.CreateModel(
            name='EncarregadoEducacao',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('nome_completo', models.CharField(max_length=200)),
                ('bi', models.CharField(max_length=20)),
                ('genero', models.CharField(choices=[('M', 'Masculino'), ('F', 'Feminino')], max_length=1)),
                ('parentesco', models.CharField(choices=[('Pai', 'Pai'), ('Mãe', 'Mãe'), ('Avô', 'Avô'), ('Avó', 'Avó'), ('Tio', 'Tio'), ('Tia', 'Tia'), ('Irmão', 'Irmão'), ('Irmã', 'Irmã'), ('Tutor', 'Tutor')], max_length=20)),
                ('profissao', models.CharField(blank=True, max_length=100)),
                ('local_trabalho', models.CharField(blank=True, max_length=200)),
                ('telefone_principal', models.CharField(max_length=20)),
                ('telefone_alternativo', models.CharField(blank=True, max_length=20)),
                ('email', models.EmailField(blank=True, max_length=100)),
                ('endereco', models.TextField()),
                ('e_contacto_emergencia', models.BooleanField(default=True)),
                ('utilizador', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('escola', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola')),
            ],
            options={
                'verbose_name': 'Encarregado de Educação',
                'verbose_name_plural': 'Encarregados de Educação',
                'db_table': 'encarregado_educacao',
            },
        ),
        migrations.AddField(
            model_name='disciplina',
            name='escola',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola'),
        ),
        migrations.AddField(
            model_name='curso',
            name='escola',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola'),
        ),
        migrations.AddField(
            model_name='anolectivo',
            name='escola',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola'),
        ),
        migrations.AddField(
            model_name='aluno',
            name='escola',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola'),
        ),
        migrations.CreateModel(
            name='TipoAvaliacao',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('designacao', models.CharField(max_length=100)),
                ('peso', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('descricao', models.TextField(blank=True)),
                ('escola', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola')),
            ],
        ),
        migrations.AddField(
            model_name='avaliacao',
            name='tipo_avaliacao',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='academico.tipoavaliacao'),
        ),
        migrations.CreateModel(
            name='Turma',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('designacao', models.CharField(max_length=10)),
                ('sala', models.CharField(blank=True, max_length=50)),
                ('turno', models.CharField(choices=[('Manhã', 'Manhã'), ('Tarde', 'Tarde'), ('Noite', 'Noite')], max_length=10)),
                ('capacidade_maxima', models.IntegerField(default=40)),
                ('vagas_disponiveis', models.IntegerField(default=40)),
                ('activo', models.BooleanField(default=True)),
                ('ano_lectivo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.anolectivo')),
                ('classe', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.classe')),
                ('curso', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.curso')),
                ('director_turma', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='turmas_dirigidas', to='academico.professor')),
                ('escola', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola')),
            ],
            options={
                'verbose_name': 'Turma',
                'verbose_name_plural': 'Turmas',
                'db_table': 'turma',
                'unique_together': {('escola', 'ano_lectivo', 'classe', 'designacao')},
            },
        ),
        migrations.CreateModel(
            name='HorarioAula',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('dia_semana', models.CharField(choices=[('Segunda', 'Segunda-feira'), ('Terça', 'Terça-feira'), ('Quarta', 'Quarta-feira'), ('Quinta', 'Quinta-feira'), ('Sexta', 'Sexta-feira'), ('Sábado', 'Sábado')], max_length=10)),
                ('hora_inicio', models.TimeField()),
                ('hora_fim', models.TimeField()),
                ('sala', models.CharField(blank=True, max_length=50)),
                ('disciplina', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.disciplina')),
                ('professor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.professor')),
                ('turma', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='horarios', to='academico.turma')),
            ],
            options={
                'verbose_name': 'Horário de Aula',
                'verbose_name_plural': 'Horários de Aulas',
                'db_table': 'horario_aula',
            },
        ),
        migrations.CreateModel(
            name='Comunicado',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('titulo', models.CharField(max_length=200)),
                ('conteudo', models.TextField()),
                ('tipo', models.CharField(choices=[('Geral', 'Geral'), ('Urgente', 'Urgente'), ('Evento', 'Evento'), ('Aviso', 'Aviso')], max_length=20)),
                ('destinatario_tipo', models.CharField(choices=[('Todos', 'Todos'), ('Alunos', 'Alunos'), ('Professores', 'Professores'), ('Encarregados', 'Encarregados'), ('Turma Específica', 'Turma Específica')], max_length=50)),
                ('anexo', models.FileField(blank=True, null=True, upload_to='comunicados/anexos/')),
                ('data_publicacao', models.DateTimeField(auto_now_add=True)),
                ('data_expiracao', models.DateTimeField(blank=True, null=True)),
                ('activo', models.BooleanField(default=True)),
                ('publicado_por', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('escola', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.tenantescola')),
                ('turma', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='academico.turma')),
            ],
        ),
        migrations.AddField(
            model_name='avaliacao',
            name='turma',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.turma'),
        ),
        migrations.CreateModel(
            name='CursoClasseDisciplina',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('obrigatoria', models.BooleanField(default=True)),
                ('carga_horaria', models.IntegerField()),
                ('ordem_exibicao', models.IntegerField(default=0)),
                ('classe', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.classe')),
                ('curso', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.curso')),
                ('disciplina', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.disciplina')),
            ],
            options={
                'verbose_name': 'Grade Curricular',
                'verbose_name_plural': 'Grades Curriculares',
                'db_table': 'curso_classe_disciplina',
                'unique_together': {('curso', 'classe', 'disciplina')},
            },
        ),
        migrations.CreateModel(
            name='AlunoEncarregado',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('e_responsavel_financeiro', models.BooleanField(default=True)),
                ('e_responsavel_pedagogico', models.BooleanField(default=True)),
                ('prioridade_contacto', models.IntegerField(default=1)),
                ('aluno', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='encarregados', to='academico.aluno')),
                ('encarregado', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alunos', to='academico.encarregadoeducacao')),
            ],
            options={
                'verbose_name': 'Encarregado do Aluno',
                'verbose_name_plural': 'Encarregados dos Alunos',
                'db_table': 'aluno_encarregado',
                'unique_together': {('aluno', 'encarregado')},
            },
        ),
        migrations.CreateModel(
            name='DisciplinaProfessor',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('anos_experiencia', models.IntegerField(default=0)),
                ('disciplina', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.disciplina')),
                ('professor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='disciplinas_lecionadas', to='academico.professor')),
            ],
            options={
                'verbose_name': 'Disciplina do Professor',
                'verbose_name_plural': 'Disciplinas dos Professores',
                'db_table': 'disciplina_professor',
                'unique_together': {('professor', 'disciplina')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='disciplina',
            unique_together={('escola', 'codigo')},
        ),
        migrations.AlterUniqueTogether(
            name='curso',
            unique_together={('escola', 'codigo')},
        ),
        migrations.AlterUniqueTogether(
            name='anolectivo',
            unique_together={('escola', 'designacao')},
        ),
        migrations.CreateModel(
            name='Matricula',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('data_matricula', models.DateField()),
                ('numero_matricula', models.CharField(max_length=50, unique=True)),
                ('tipo_matricula', models.CharField(choices=[('Nova', 'Nova'), ('Renovação', 'Renovação'), ('Transferência', 'Transferência')], max_length=20)),
                ('escola_origem', models.CharField(blank=True, max_length=200)),
                ('status', models.CharField(choices=[('Activa', 'Activa'), ('Cancelada', 'Cancelada'), ('Transferida', 'Transferida'), ('Concluída', 'Concluída')], default='Activa', max_length=20)),
                ('observacoes', models.TextField(blank=True)),
                ('documentos_entregues', models.JSONField(default=dict)),
                ('aluno', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='matriculas', to='academico.aluno')),
                ('ano_lectivo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.anolectivo')),
                ('matriculado_por', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('turma', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.turma')),
            ],
            options={
                'verbose_name': 'Matrícula',
                'verbose_name_plural': 'Matrículas',
                'db_table': 'matricula',
                'unique_together': {('aluno', 'ano_lectivo')},
            },
        ),
        migrations.CreateModel(
            name='TurmaDisciplinaProfessor',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('ano_lectivo', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.anolectivo')),
                ('disciplina', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.disciplina')),
                ('professor', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.professor')),
                ('turma', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='academico.turma')),
            ],
            options={
                'verbose_name': 'Atribuição de Professor',
                'verbose_name_plural': 'Atribuições de Professores',
                'db_table': 'turma_disciplina_professor',
                'unique_together': {('turma', 'disciplina', 'ano_lectivo')},
            },
        ),
    ]
